<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In</title>
</head>

<body>
    Email: <input type="email" name="email" id="email"><br>
    Password: <input type="password" name="password" id="password"><br>
    <button id="login">Submit</button><br>

    <p id="error" style="display: none; color: red;"></p>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <script>
        $('#login').click((event) => {
            event.preventDefault();
            $('#error').hide();
            let username = $('#email').val();
            let password = $('#password').val();
            $.ajax({
                url: "/auth/login",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                headers: {
                    "Authorization": "Basic " + btoa(username + ":" + password)
                },
                beforeSend: () => {
                    $('#login').prop('disabled', true);
                },
                success: (data) => {
                    console.log('logged in')
                },
                error: (error) => {
                    console.log(error);
                    $('#error').show();
                    $('#error').html(error.responseText);
                }
            })
        })

    </script>

</body>

</html>